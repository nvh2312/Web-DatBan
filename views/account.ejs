<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/stylesheets/style.css">
    <link rel="stylesheet" href="/stylesheets/cart.css">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
        integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="/stylesheets/toastr.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css" />
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.full.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <link rel="stylesheet" type="text/css" href="https://npmcdn.com/flatpickr/dist/themes/material_blue.css">
</head>

<body>
    <%- include('./partials/header.ejs') %>

        <div class="content" style="background: rgb(248, 249, 250);">
            <div class="list-item">
                <div class="d-flex py-5 text-center">
                    <div class="col-3">
                        <div class="avatar d-flex">
                            <div class="col-4">
                                <img class="rounded-circle" src="./images/ts.jpg" alt="..."
                                    style="width:5rem; height: 5rem;">
                            </div>
                            <div class="col-8">
                                <p>
                                    <%=data.name %>
                                </p>
                                <button id="editProfile" style=" border: none;
                        background: none;
                    "><i class="fa fa-edit"></i> Sửa thông tin</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-9 line">
                        <h3>Tài khoản của bạn</h3>
                    </div>
                </div>
            </div>
            <div class="list-item">
                <div class="d-flex">
                    <div class="col-3 p1">
                        <ul class="py-3" style="background: white">
                            <h6>TÀI KHOẢN</h6>
                            <li><a href="/account">Thông tin tài khoản</a></li>
                            <li><a href="/listOrder">Đơn hàng</a></li>
                            <li><a href="/home" onclick="logout()">Đăng xuất</a></li>
                        </ul>


                    </div>
                    <div class="col-9">
                        <div class="user-in4 p2">
                            <h6 class="my-2">THÔNG TIN TÀI KHOẢN</h6>
                            <div class="inf-user border-top my-3">
                                <div class="input-group input-group-sm mb-3">
                                    <input id="name" type="text" class="form-control" aria-label="Sizing example input"
                                        aria-describedby="inputGroup-sizing-sm" value="<%=data.name %>" readonly>
                                </div>
                                <div class="input-group input-group-sm mb-3">
                                    <input id="phone" type="text" class="form-control" aria-label="Sizing example input"
                                        aria-describedby="inputGroup-sizing-sm" value="<%=data.phone %>" readonly>
                                </div>
                                <div class="input-group input-group-sm mb-3">
                                    <input id="email" type="text" class="form-control" aria-label="Sizing example input"
                                        aria-describedby="inputGroup-sizing-sm" value="<%=data.email %>" readonly>
                                </div>
                                <div class="text-center">
                                    <button class="btn btn-primary save">Lưu</button>

                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

        </div>
        <%- include('./partials/footer.ejs') %>
            <script>
                $('.save')[0].style.display = 'none';
                let qtt = JSON.parse(localStorage.getItem("total"));
                if (!qtt) {
                    qtt = 0;
                }
                $(".count").html(qtt);

                function logout() {
                    $.ajax({
                        url: "http://localhost:3000/home/checkLogout",
                        method: "POST",
                        data: {},
                        dataType: "JSON",
                        success: () => {
                            window.location = "/home";
                        },
                    });
                }
                $('#editProfile').click(() => {
                    $('#name').attr('readonly', false);
                    $('#phone').attr('readonly', false);
                    $('#email').attr('readonly', false);
                    $('.save')[0].style.display = 'inline-block';
                })
                $('.save').click(() => {
                    $('#name').attr('readonly', true);
                    $('#phone').attr('readonly', true);
                    $('#email').attr('readonly', true);
                    $('.save')[0].style.display = 'none';

                })
            </script>

</body>

</html>